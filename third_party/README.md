# ecgpuwave

Software can be used to detect the QRS complexes and locating the beginning, peak, and end of the P, QRS, and ST-T waveforms.

(https://physionet.org/physiotools/ecgpuwave/) 

# Requirements
1. gfortran:

    ```
    sudo apt-get install gfortran
    ```

2. [WFDB](http://www.physionet.org/physiotools/wfdb.shtml)

    ```
    apt-get install gcc libcurl4-openssl-dev libexpat1-dev
    ```
    Download [WFDB](https://www.physionet.org/physiotools/wfdb.tar.gz) from https://www.physionet.org/physiotools/wfdb.tar.gz

    ```
    cd wfdb-...
    ./configure
    sudo make install
    make check
    ```
    
    By default install in */usr/local*

    ```
    ./configure --prefix=/somewhere/else
    ```

# Install

```
sudo make install
make check
```

# Using ecgpuwave

ecgpuwave -r *record* -a *annotator* [ options ... ] 

*ecgpuwave -r 100 -a qrs*

ecgpuwave analyses an ECG signal from the specified record, detecting the QRS complexes and locating the beginning, peak, and end of the P, QRS, and ST-T waveforms. The output of ecgpuwave is written as a standard WFDB-format annotation file associated with the specified annotator. This file can be converted into text format using rdann(1) or viewed using wave(1) .

The QRS detector is based on the algorithm of Pan and Tompkins (reference 1) with some improvements that make use of slope information (reference 2). Optionally, QRS annotations can be provided as input (see option -i), permitting the use of external QRS detectors such as sqrs(1) or manually-edited annotations (which can be created using wave(1) ). The waveform limit locator is based on the algorithm described in reference 3 and evaluated in references 3 and 4.

The output annotation file contains PWAVE ("p") and TWAVE ("t") annotations that indicate the P- and T-wave peaks, as well as QRS annotations (NORMAL ("N") if generated by the built-in QRS detector, or copies of the input QRS annotations if these were supplied). ecgpuwave classifies each T wave as type 0 (normal), 1 (inverted), 2 (positive monophasic), 3 (negative monophasic), 4 (biphasic negative-positive), or 5 (biphasic positive-negative); this numeric classification is written into the num field of each TWAVE annotation. The P, QRS, and T waveform onsets and ends are marked in the output annotation file using WFON ("(") and WFOFF (")") annotations. The num field of each WFON and WFOFF annotation designates the type of waveform with which it is associated: 0 for a P wave, 1 for a QRS complex, or 2 for a T wave.

Options include:

**-f** *time*
    Begin at the specified time (default: the beginning of the record). 

**-i** *input-annotator*
    Read QRS locations from the specified input-annotator (and copy them to the output annotation file). Default: run the built-in QRS detector. 

**-n** *beat-type*
    Specify which beats to process (must be used together with -i): beat_type may be 0 (default: process all beats) or 1 (process only beats labelled as NORMAL ("N") by the input annotator).

**-s** *n*
    Analyze signal n (default: signal 0). 

**-t** *time*
    Stop at the specified time (default: the end of the record). 






*ecgpuwave is available as part of PhysioToolkit under the GPL (see Source below).*